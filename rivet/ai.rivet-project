version: 4
data:
  attachedData:
    trivet:
      testSuites:
        - id: Yw-BkukCt1xAtBjupiNFz
          testCases: []
          testGraph: uLDGWIiCbhJiXnUV_JLQf
          validationGraph: uLDGWIiCbhJiXnUV_JLQf
      version: 1
  graphs:
    uLDGWIiCbhJiXnUV_JLQf:
      metadata:
        description: ""
        id: uLDGWIiCbhJiXnUV_JLQf
        name: "*Main"
      nodes:
        '[2o5Gl2QSjoHRqANJjlMmA]:graphInput "Graph Input"':
          data:
            dataType: number
            id: l_chapter
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Text" 9JoDtHVRcXhhrOQpnRmOK/l_chapter
          visualData: -178.93826355021315/22.055870227025196/330/null//
        '[9JoDtHVRcXhhrOQpnRmOK]:text "Text"':
          data:
            normalizeLineEndings: true
            text: >-
              You are a professional children's story writer.


              Please generate an engaging and age-appropriate children's story in {{n_chapters}} chapters using the information below.


              ### Target Audience

              - Children aged 5–8


              ### Story Instructions

              {{story_instructions}}


              ### Characters


              **Primary Characters**  

              {{primary_characters}}


              **Secondary Characters**  

              {{secondary_characters}}


              ### Requirements

              - The story should have:
                - A **title**
                - A **summary** (50–100 words)
                - {{n_chapters}} chapters, each with:
                  - A **subtitle** (short and creative)
                  - A **content** section {{l_chapter}}
                  - A **suggested image prompt** for illustration generation

              - Keep the language simple, clear, and engaging

              - The story must be consistent with the characters' personalities

              - Include imaginative elements and a positive lesson

              - Avoid violence or anything inappropriate


              Return the story in valid JSON format with this structure:

              {
                "Title": string,
                "Summary": string,
                "Chapters": [
                  {
                    "Number": number,
                    "Title": string,
                    "ImagePrompt": string,
                    "Content": string
                  }
                ],
                "ThemesOrLessons": [string]
              }
          outgoingConnections:
            - output->"Chat" vnIg16866CIos6iA5_kRG/prompt
          visualData: 794.2913223270912/16.909152619238036/300/null//
        '[HR1WMEAs_GMpaD4rjxEyK]:graphInput "Graph Input"':
          data:
            dataType: number
            id: n_chapters
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Text" 9JoDtHVRcXhhrOQpnRmOK/n_chapters
          visualData: -204.23141598139742/-471.1606021810677/330/45//
        '[JjKBe9D6PrqPpDgpa-a5L]:graphInput "Graph Input"':
          data:
            dataType: string
            id: primary_characters
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Text" 9JoDtHVRcXhhrOQpnRmOK/primary_characters
          visualData: -131.51360274174272/-232.4564761117664/330/40//
        '[MictZhpGrmuIinfwS-63B]:extractJson "Extract JSON"':
          data:
            text: ""
          outgoingConnections:
            - output->"Graph Output" VAJSFkewXe9K7Ht8nP0_O/value
          visualData: 1737.460553212617/16.66676671924019/250/28//
        '[TNvQ0U4ELQGL45XaDWIwo]:graphInput "Graph Input"':
          data:
            dataType: string
            id: story_instructions
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Text" 9JoDtHVRcXhhrOQpnRmOK/story_instructions
          visualData: -227.02267055149298/592.5013773334902/330/32//
        '[VAJSFkewXe9K7Ht8nP0_O]:graphOutput "Graph Output"':
          data:
            dataType: string
            id: output
          visualData: 2209.9239161613004/16.968348956717865/330/29//
        '[Zg3IfAR35ig85OiLOraUF]:graphInput "Graph Input"':
          data:
            dataType: string
            id: secondary_characters
            useDefaultValueInput: false
          outgoingConnections:
            - data->"Text" 9JoDtHVRcXhhrOQpnRmOK/secondary_characters
          visualData: -133.09442476869174/309.76547913174596/330/33//
        '[vnIg16866CIos6iA5_kRG]:chat "Chat"':
          data:
            additionalParameters: []
            cache: false
            enableFunctionUse: false
            maxTokens: 1024
            modalitiesIncludeAudio: false
            modalitiesIncludeText: false
            model: gpt-4o-mini
            outputUsage: false
            parallelFunctionCalling: true
            reasoningEffort: ""
            stop: ""
            temperature: 0.5
            top_p: 1
            useAdditionalParametersInput: false
            useAsGraphPartialOutput: true
            useFrequencyPenaltyInput: false
            useMaxTokensInput: false
            useModelInput: false
            usePredictedOutput: false
            usePresencePenaltyInput: false
            useReasoningEffortInput: false
            useServerTokenCalculation: true
            useStop: false
            useStopInput: false
            useTemperatureInput: false
            useTopP: false
            useTopPInput: false
            useUseTopPInput: false
            useUserInput: false
          outgoingConnections:
            - response->"Extract JSON" MictZhpGrmuIinfwS-63B/input
          visualData: 1304.3011870766209/16.1616827569539/200/22//
  metadata:
    description: Use this template to build your own Rivet AI Agent
    id: 4gcc9rbGe_r1oYM7jH-P3
    mainGraphId: uLDGWIiCbhJiXnUV_JLQf
    title: AI Agent Template
  plugins: []
  references: []
